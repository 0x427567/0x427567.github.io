<!DOCTYPE html>
<html>
  <head><meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title></title>
<link rel="stylesheet" href="https://unpkg.com/bulma@0.7.5/css/bulma.min.css" />
</head>
  <body><nav class="navbar">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-burger burger" data-target="">
          <span></span>
          <span></span>
          <span></span>
        </a>
      </div>
      <div id="navbarBasicExample" class="navbar-menu">
        <div class="navbar-start">
          <a class="navbar-item" href="/">
            Home
        </a>
      </div>
    </div>
  </nav>
  <section class="section">
    <div class="container">
      <div class="columns">
        <main class="column is-9">
          

<nav class="breadcrumb is-small" aria-label="breadcrumbs">
  <ul>
    <li>
      <a href="http://example.org/">
        <span class="icon is-small">
          <i class="fas fa-home" aria-hidden="true"></i>
        </span>
        <span>Home</span>
      </a>
    </li>
    <li class="is-active">
      <a href="#">
        <span class="icon is-small">
          <i class="fas fa-book" aria-hidden="true"></i>
        </span>
        <span>Posts</span>
      </a>
    </li>
    <li class="is-active">
      <a href="#"></a>
        <span class="icon is-small">
          <i class="fas fa-puzzle-piece" aria-hidden="true"></i>
        </span>
        <span>How to clone AWS CodeCommit repository from EC2 instance</span>
      </a>
    </li>
  </ul>
</nav>
<h1 class="title">How to clone AWS CodeCommit repository from EC2 instance</h1>
<div class="content is-small"><i class="far fa-calendar-alt"></i> August 13, 2016 <i class="fas fa-book-open"></i> 2 Min</div>
<div class="content">
  <p>CodeCommit is a git service in AWS, you can own the private repository just a small fee, if you are personal or small group will be not charged any fee in some way.</p>

<p>Well, I will deploy my application from CodeCommit to EC2, below is my way. First I created a repository in CodeCommit.</p>

<figure>
    <img src="/posts/images/How-to-clone-AWS-CodeCommit-repository-from-EC2-instance/Create_Repository_In_AWS_CodeCommit.png"/> 
</figure>


<p>Before create a new EC2 instance, add a new IAM role.</p>

<figure>
    <img src="/posts/images/How-to-clone-AWS-CodeCommit-repository-from-EC2-instance/Create_New_Role_In_IAM.png"/> 
</figure>


<p>Now you will see this screen, click select button in <strong>Amazon EC2</strong>.</p>

<figure>
    <img src="/posts/images/How-to-clone-AWS-CodeCommit-repository-from-EC2-instance/Chose_Amazon_EC2.png"/> 
</figure>


<p>Input CodeCommit in filter and click <strong>AWSCodeCommitReadOnly</strong>.</p>

<figure>
    <img src="/posts/images/How-to-clone-AWS-CodeCommit-repository-from-EC2-instance/Attach_CodeCommitReadOnly.png"/> 
</figure>


<p>Now review the IAM role, if no any problem then click <strong>Create Role</strong>.</p>

<figure>
    <img src="/posts/images/How-to-clone-AWS-CodeCommit-repository-from-EC2-instance/Review_IAM_Role.png"/> 
</figure>


<p>OK, let&rsquo;s check the role, you will see something like below.</p>

<figure>
    <img src="/posts/images/How-to-clone-AWS-CodeCommit-repository-from-EC2-instance/Check_IAM_Role.png"/> 
</figure>


<p>Now I can create a new EC2 instance and assign a role, this step is important, do not forgot!</p>

<figure>
    <img src="/posts/images/How-to-clone-AWS-CodeCommit-repository-from-EC2-instance/EC2_IAM_Role.png"/> 
</figure>


<p>Well done, I can start setting my EC2 instance, first thing is check AWS CLI version, CodeCommit only working with AWS CLI 1.7.38 and later, type <strong>aws &ndash;version</strong> in terminal and check the version. For Debian will needs upgrade AWS CLI version, just follow steps.</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sudo apt-get purge aws
$ sudo apt-get install python-pip
$ sudo pip install awscli</code></pre></td></tr></table>
</div>
</div>

<p>When done, setting git config, just two  commands.</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git config --global credential.helper <span style="color:#e6db74">&#39;!aws codecommit credential-helper $@&#39;</span>
git config --global credential.UseHttpPath true</code></pre></td></tr></table>
</div>
</div>

<p>Now clone git repository from CodeCommit.</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">admin@ip-10-0-129-84:~$ git clone https://git-codecommit.us-east-1.amazonaws.com/v1/repos/0x427567-Test
Cloning into <span style="color:#e6db74">&#39;0x427567-Test&#39;</span>...
warning: You appear to have cloned an empty repository.
Checking connectivity... <span style="color:#66d9ef">done</span>.</code></pre></td></tr></table>
</div>
</div>

<p>For now, my EC2 can direct clone repository from CodeCommit and do not need setting AWS CLI credential, let me know if you have any question, thanks!</p>
</div>


          
        </main><aside class="column is-3"><div class="card">
  <header class="card-header">
    <p class="card-header-title">Latest Posts</p>
  </header>
  <div class="card-content">
    <ul>
      
    </ul>
  </div>
</div><div class="card">
  <header class="card-header">
    <p class="card-header-title">Categories</p>
  </header>
  <div class="card-content">
    <ul>
      
        <li><a href="http://example.org/categories/tutorial/">Tutorial</a> (6)</li>
      
        <li><a href="http://example.org/categories/networking/">Networking</a> (2)</li>
      
        <li><a href="http://example.org/categories/node.js/">Node.js</a> (2)</li>
      
        <li><a href="http://example.org/categories/aws/">AWS</a> (1)</li>
      
        <li><a href="http://example.org/categories/development-log/">Development Log</a> (1)</li>
      
        <li><a href="http://example.org/categories/devops/">DevOps</a> (1)</li>
      
        <li><a href="http://example.org/categories/noranoie/">Noranoie</a> (1)</li>
      
    </ul>
  </div>
</div><div class="card">
  <header class="card-header">
    <p class="card-header-title">Tags</p>
  </header>
  <div class="card-content">
    <div class="tags">
      
        <span class="tag"><a href="http://example.org/tags/aws/">AWS</a>(1)</span>
      
        <span class="tag"><a href="http://example.org/tags/codecommit/">CodeCommit</a>(1)</span>
      
        <span class="tag"><a href="http://example.org/tags/database/">Database</a>(2)</span>
      
        <span class="tag"><a href="http://example.org/tags/development-log/">development log</a>(1)</span>
      
        <span class="tag"><a href="http://example.org/tags/devops/">DevOps</a>(1)</span>
      
        <span class="tag"><a href="http://example.org/tags/nginx/">Nginx</a>(1)</span>
      
        <span class="tag"><a href="http://example.org/tags/node.js/">Node.js</a>(2)</span>
      
        <span class="tag"><a href="http://example.org/tags/noranoie/">noranoie</a>(1)</span>
      
        <span class="tag"><a href="http://example.org/tags/tutorial/">Tutorial</a>(5)</span>
      
    </div>
  </div>
</div></aside></div>
    </div>
  </section>
  <script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js" integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ" crossorigin="anonymous"></script>
  </body>
</html>
